[[Операционные системы/1 Глава/1 Глава - Введение|1 Глава - Введение]]

<span style="color:HotPink;font-weight:bold;">Процессор</span>

- Для чего нужны регистр процессора?
	- У всех центральных процессоров есть несколько собственных регистров для хранения основных переменных и промежуточных результатов
- Для чего нужен регитр - счетчик команд?
	- Cодержит адрес ячейки памяти со следующей выбираемой командой. После выборки этой команды счетчик команд обновляется, переставляя указатель на следующую команду.
- Регистр - указатель стека 
	- Ссылается на вершину стека 
	- Стек состоит из фреймов - он хранит входные параметры, а также локальные и временные переменные подпрограммы
- Регистр - слово состояния программы
	- Содержит служебные биты о состоянии программы
	- Например: приоритет цп или режимом цп (пользователя или ядра)
- Что такое конвейр (процессора)?
	- Конвейер — это способ организации вычислений, используемый в современных процессорах и контроллерах с целью повышения их производительности.
	- Процессор может выполнять одновременно более одной команды
	- У процеесора могут быть отдельные блоки для для выборки, декодирования и выполнения команд, тогда во время выполнения команды n он сможет декодировать команду n + 1 и осуществлять выборку команды n + 2
- Суперскалярный процессор? 
	- Он имеет несколько исполнительных блоков, например: один — для целочисленной арифметики, другой — для арифметики чисел с плавающей точкой, третий — для логических операций. Одновременно выбираются две и более команды, которые декодируются и помещаются в буфер хранения, в котором ожидают возможности своего выполнения.
	- В результате команды программы часто выполняются не в порядке их следования
- Что такое системный вызов?
	- Для получения услуг от операционной системы пользовательская программа должна осуществить системный вызов, который перехватывается внутри ядра и вызывает операционную систему
- Что такое многопоточный процессор?
	- Эта технология позволяет процессору сохранять состояние двух различных потоков и переключаться между ними за наносекунды
	- Одновременно работает только один процесс, но время переключения между процессами сведено до наносекунд
- Многоядерный процессор
	- Процессор который фактически имеет мини-чипы, которые представляют собой независимый процессор

<span style="color:HotPink;font-weight:bold;">Память</span>

- Регистры
	- Внутренние регистры обычно предоставляют возможность для хранения 32 × 32 бит для 32-разрядного процессора или 64 × 64 бит — для 64-разрядного. В обоих случаях этот объем не превышает 1 Кбайт
	- Для доступа необходим обычно один такт
- Кэш процессора
	- Наиболее интенсивно используемые кэш-строки оперативной памяти сохраняются в высокоскоростной кэшпамяти, находящейся внутри процессора или очень близко к нему
- Кэш строка
	- Минимальная единица данных в кэше. Обычно это 64 или 128 байт
- Уровни кэша
	- L1 имеет объем 16 Кбайт. Он всегда является частью самого процессора и для доступа необходимо 1 такта
	- L2 содержит несколько мегабайт недавно использованных слов памяти. Доступ несколько тактов (?)
- L2 у Intel и AMD
	- Intel - L2 кэш только один совместно использующийся всеми ядрами
	- AMD - L2 кэш свой у каждого ядра
	- Общая кэш-память L2 корпорации Intel требует использования более сложного кэш-контроллера, а избранный AMD путь усложняет поддержание согласованного состояния кэш-памяти L2 разных ядер.
- ОЗУ или RAM
	- Все запросы процессора, которые не могут быть удовлетворены кэш-памятью, направляются к оперативной памяти. 
- Что такое ПЗУ?
	- Тип накопителя, который содержит программы и данные, которые нельзя изменять или перезаписывать. Это включает BIOS, операционные системы и другие важные программы, которые необходимы для загрузки компьютера.
	- ПЗУ обычно имеет более быстрое время доступа и скорость чтения данных, по сравнению с жестким диском.
- CMOS-память
	- Используется для хранения текущих даты и времени,также может хранить параметры конфигурации, указывающие, например, с какого диска системе следует загружаться
	- Получают питание от миниатюрной батарейки (или аккумулятора), поэтому значение текущего времени исправно обновляется, даже если компьютер отсоединен от внешнего источника питания
- Что такое MMU? 
	- Блок управления памятью

<span style="color:HotPink;font-weight:bold;">Устройства ввода-вывода</span>

- Контроллер устройства ввода-вывода
	- Посредник между операционной системой и самим устройством
	- Принимает команды от OC и направляет на устройство
- Драйвер устройства
	 - Программа, предназначенная для общения с контроллером, выдачи ему команды и получения поступающих от него ответов
- Что такое пространство портов ввода-вывода
	- На компьютерах регистры устройств помещаются в специальное пространство портов ввода-вывода (I/O port space), в котором каждый регистр имеет адрес порта. На таких машинах в режиме ядра доступны специальные команды ввода-вывода (обычно обозначаемые IN и OUT), позволяющие драйверам читать и записывать данные в регистры.

<span style="color:HotPink;font-weight:bold;">Обработка ввода-вывода</span>

- Активное ожидание
	- Процессор периодически бдет опрашивать устройство о завершении ввода вывода (обычно занятость устройства определяется состоянием специального бита)
- Прерывания
	- 1) Процессор передает команду контроллеру устройства
	- 2) Контроллер устройства после завершения команды передает данные <span style="color:#FFFFD2;font-weight:bold;">контроллеру прерываний</span>
	- 3) <span style="color:#FFFFD2;font-weight:bold;">Контроллер прерываний</span>  выставляет сигнал на контакте микросхемы центрального процессора, информируя его о завершении операции.  
	- 4) Затем выставляет номер устройства на шину, чтобы процессор мог его считать и узнать, какое устройство только что завершило работу (поскольку одновременно могут работать сразу несколько устройств).
- Обработка прерываний
	- 1) Процессор приостанавлиет программу - сохраняя все необходимые данные в стеке  
	- 2) Далее отрабатывает  <span style="color:#FFFFD2;font-weight:bold;">обработчик прерываний</span> (в режиме ядра) если он занят прерывания ставятся в очередь и обрабатываются по приоритетам
	- 3) После он возвращает управление остановленной программе

<span style="color:HotPink;font-weight:bold;">Шины</span>

- Шины в современном компьютере
	- У  системы имеется множество шин (например, шина кэш-памяти, шина памяти, а также шины PCIe, PCI, USB, SATA и DMI), каждая из которых имеет свою скорость передачи данных и свое предназначение
- Шина PCIe
	- В  PCIe используется архитектура последовательной шины, и все биты сообщения отправляются по одному соединению, известному как дорожка (lane).  Но параллелизм все же используется, поскольку параллельно могут действовать сразу несколько дорожек. Например, для параллельной передачи 32 сообщений могут использоваться 32 дорожки.
	- Процессор общается со внешним графическим устройством и для передачи Ethernet-кадров — через шину PCIe,SSD.
- Шина DDR3
	- Шина для общения с оперативной памятью
	- Сейчас используется оперативная память с DDR4 DDR5 но требует совместимых процессоров и материнки
- Шина USB
	- Используется для клавиатур мышек и других устройств
	- Поддерживает горячее подключение устройств без перезагрузки компьютера
- Шина SCSI 
	- (Small Computer System Interface — интерфейс малых вычислительных систем)
	- Для высокопроизводительных дисков, сканеров и других устройств, нуждающихся в значительной пропускной способности. В наши дни эти шины встречаются в основном в серверах и рабочих станциях - до 640 Мбайт/с
- Технология plug and play
	- Собирает информацию об устройствах ввода-вывода, централизованно присваивая уровни запросов на прерывания и адреса ввода-вывода, а затем сообщать каждой карте, какие значения ей присвоены

<span style="color:HotPink;font-weight:bold;">Загрузка компьютера</span>

- Что такое BIOS 
	- Базовая система ввода вывода
	- При начальной загрузке компьютера BIOS начинает работать первой. Сначала она проверяет объем установленной на компьютере оперативной памяти и наличие клавиатуры, а также установку и нормальную реакцию других основных устройств
	- После этого операционная система запрашивает BIOS, чтобы получить информацию о конфигурации компьютера. Она проверяет наличие драйверая каждого устройства.


