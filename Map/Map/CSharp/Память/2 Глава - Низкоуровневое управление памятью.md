[[C#/Память/Общее|Общее]]

<span style="color:HotPink;font-weight:bold;">Оборудование</span>

- Процессор
	- Процессор (ЦП, центральный процессор) – В нем находятся такие компоненты, как арифметико-логическое устройство (АЛУ), блок выполнения операций с плавающей точкой  FPU, регистры и конвейеры выполнения команд, – они отвечают за эффективное выполнение команд, составленных из нескольких элементарных операций, выполняемых (по возможности) параллельно
- Северный мост
	- Северный мост – устройство, содержащее в основном контроллер доступа к  памяти, отвечающий за управление взаимодействием между памятью и ЦП
- Шина памяти
	-  шина данных, соединяющая ОЗУ с северным мостом.
- Южный мост
	- Южный мост  – микросхема, отвечающая за все функции ввода-вывода: USB, звук, последовательная передача, системная BIOS, шина ISA, контроллер прерываний и каналы IDE – контроллеры устройств внешней памяти, такие как PATA или SATA.
- Устройство компьютера
	-  ![[устройства.png|300]]
- Северный мост внутри процессора
	- Стоит отметить, что раньше ЦП, северный мост и южный мост были отдельными микросхемами, но теперь они тесно интегрированы. Начиная с микроархитектур Intel Nehalem и AMD Zen, северный мост находится внутри
	- Это немного сокращает задержку запроса к памяти
- Задаржка к доступу в кэшах
	- ![[2024-04-15_23-11-23.png|400]]
- L1 кэш
	- Состоит из 2 блоков: для команд и для данных
- Механизм одновременной многопоточности или hyperthreading
	- Который позволяет одновременно выполнять два потока в одном ядре
- Виртуальная память
	- Это часть ОС, в обязанности которой входит
		- Отображение виртуального адресного пространства на физическую память. в 64-разрядных – 64-разрядное
		- Перемещение некоторых участков памяти из ОЗУ на жесткие диски, когда они не используются, и обратно, когда в них вновь возникла необходимость. . Место, где хранятся такие данные, называется страничным файлом, или файлом подкачки.
		- Благодаря механизму виртуальной памяти каждый процесс видит память таким образом, как будто он единственный процесс в системе.
	- Она реализуется на уровне ЦП и ОС
- Страницы виртуальной памяти
	- Виртуальная память отображается в страницы (по 4 кб)
	- Функция VirtualAlloc - выделяет 64кб памяти а не 4, даже если было указано меньше
	- ОС хранит таблицу страниц, которая отображает виртуальный адрес в физический. Она состоит из 4 уровней и проход по ней обходится дорого
		- но используются кэши которые немного помогают
- Подсистем управления памятью в Windows
	-  Virtual API – низкоуровневый API, работающий с отдельными страницами. Примерами являются функции VirtualAlloc и VirtualFree, о которых вы, возможно, слышали; 
	- Heap API – высокоуровневый API, предоставляющий распределитель (вспомните главу 1) для выделения блоков, меньших одной страницы. На этом уровне находятся, в частности, функции HeapAlloc и HeapFree.
- 