[[Альтернативные связи]]
- <span style="color:yellow;">Разбиение таблицы похоже на [[Собственные типы]] но выполняет противоположную функцию - чтобы загрузить часть таблицы нужно использовать include</span>
- Таким образом можно отделить свойсива к которым часто обращаются от менее востребованных в очень больших классах для повышения производительности
- !!! Использование разбиено по сути создание аналогично созданию связей но все типы будут отображены в одну таблицу
- !!! Тоже самое можно достичь с помощью Select выбрав нужные свойства(и это будет работать быстрее чем разбиение)
- Эта возможность сделана для удобства
![[разбиение.png]]

- Мы буквально настраиваем всязь один к одному в этом примере но ef core создает одну таблицу и пи запросе загружает только свойства BookSummary - если не include
```cs
using System.ComponentModel;  
  
namespace Data.Entities.Splitting;  
  
public class Computer  
{  
    public int ComputerId { get; set; }  
    public int ComputerName { get; set; }  
    public required string Company { get; set; }  
    public required ComputerCharacteristics Characteristics { get; set; }  
}  
  
public class ComputerCharacteristics  
{  
    public int ComputerCharacteristicsId { get; set; }   
    public int Cors { get; set; }  
    public required string ProcessorName { get; set; }  
    public required string VideoCardName { get; set; }   
    public int RamCount { get; set; }  
}
```
- Конфигурация
```cs
public DbSet<Computer> Computers { get; set; } = null!;
// настройка связи один к одному
modelBuilder.Entity<Computer>()  
    .HasOne(c => c.Characteristics)  
    .WithOne()  
    .HasForeignKey<ComputerCharacteristics>(cc => cc.ComputerCharacteristicsId);  
// сущности в одну таблицу 
modelBuilder.Entity<Computer>()  
    .ToTable(nameof(Computers));  
  
modelBuilder.Entity<ComputerCharacteristics>()  
    .ToTable(nameof(Computers));
```
- Использование
```cs
Computer computer = new Computer()  
{  
    Company = "acer",  
    ComputerName = 2,  
    Characteristics = new ComputerCharacteristics()  
    {        ProcessorName = "intel",  
        RamCount = 5,  
        VideoCardName = "1060"  
    }  
};  
  
context.Computers.Add(computer);  
await context.SaveChangesAsync(stoppingToken);  
  
Computer? addedComputer = await context.Computers  
	// нужно загружать связь в отличие от собственных типов
    .Include(c => c.Characteristics)  
    .FirstOrDefaultAsync(stoppingToken);
```