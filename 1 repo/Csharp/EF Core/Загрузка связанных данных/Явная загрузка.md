[[Загрузка связей]]

- Загрузка связей
```cs
var firstBook = context.Books.First(); 
// загрузка табицы многие ко многиим
context.Entry(firstBook).Collection(book => book.AuthorsLink).Load();
foreach (var authorLink in firstBook.AuthorsLink) 
{ 
    // зарузка каждого нав св-ва из вспомогат таблицы
	context.Entry(authorLink) .Reference(bookAuthor => bookAuthor.Author).Load();
} 
// при скрытой таблицы многие ко многим можно загружать сразу
context.Entry(firstBook).Collection(book => book.Tags).Load();
// загрузка нав св-ва (1 ко многим)
context.Entry(firstBook).Reference(book => book.Promotion).Load();
```
- !!! обратить внимание на разные загрузки для cкрытых и ручных таблиц связи многие ко многим [[Многие ко многим]]
- Вместо загрузки можно просто запросить данные (Query)
```cs
var firstBook = context.Books.First(); 

var numReviews = context.Entry(firstBook) .Collection(book => book.Reviews) .Query().Count(); 

var starRatings = context.Entry(firstBook) .Collection(book => book.Reviews) .Query().Select(review => review.NumStars) .ToList();
```
### Преимущество данной загрузки только , когда данные нужно загружать после запороса(к примеру по условию) , а не сразу в нем