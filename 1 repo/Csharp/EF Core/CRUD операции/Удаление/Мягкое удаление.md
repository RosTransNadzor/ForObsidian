[[Удаление]]

Мягкое удаление  - скрытие сущности вместо удаления
- 1 - добавление св-ва для скрытия 
- 2 - добавление глобального фильтра запросов (Fluent) - для скрытия
- !!!! Но при этом каскадного удаления не произойдет и допустим отзывы на удаленную книгу все еще будут видны
[[Фильтры запросов]]
```cs
// 1.
public class Book { 
	//… Остальные свойства не указаны для ясности; 
	public bool SoftDeleted { get; set; } 
}
// 2. - в методе onModelCreating
// глобальный фильтр
modelBuilder.Entity() .HasQueryFilter(p => !p.SoftDeleted);
// 3. если вы хотите увидеть скрые строки таблицы
context.Books.IgnoreQueryFilters()
```
- Этот процесс хорошо работает с мягким удалением, потому что если сущность Book (корень) мягко удаляется, вы не сможете получить доступ к  ее агрегатам. Таким образом, правильный код для подсчета всех отзывов с учетом мягкого удаления выглядит так: 
```cs
var numReviews = context.Books.SelectMany(x => x.Reviews).Count();
```