[[CRUD операции]]

- Самое быстрое обновление происходит при использовании Update(T entity)
- поиск идет по первичному ключу
```cs
// author - измененная сущность
context.Authors.Update(author);
```
- Боллее безопасное - обновление отдельных колонок 
```cs
var book = context.Books.SingleOrDefault(p => p.Title == "Quantum Networking"); 
book.PublishedOn = new DateTime(2058, 1, 1); 
context.SaveChanges();
```
- Обновление связи (1 к 1)
- (Также можно вручную создать новый объект инастроить связь) - более быстрая работа
```cs
var book = context.Books
// получаем связь
	.Include(p => p.Promotion).First(p => p.Promotion == null); 
// обновляем связь если сущесвует она удаляется и заменяется
// автоматически задаст BookId
// (1 ко 1)
book.Promotion = new PriceOffer 
{ NewPrice = book.Price / 2, PromotionalText = "Half price today!" };
await context.SaveChangesAsync()
```
- Обновление 1 ко многим - либо замена всего списка или удаление связи и добавление  новой вручную
```cs
var book = context.Books .Include(p => p.Reviews) .Single(p => p.BookId == twoReviewBookId);
// обновление всего списка
book.Reviews = new List { new Review { VoterName = "Unit Test", NumStars = 5, } }; 
// удаление и обновление части списка (более быстый но менее простой)(ручной)
var oldReview = book.Reviews.First();
book.Reviews.Remove(oldReview);

book.Reviews.Add(newReview)

context.SaveChanges();
```
- Обновление связи (многие ко многим)  для [[Ручная таблица]]
- в этой связи есть связующая таблица достаточно обновить таблицу у одной сущности
###### или вручную создать BookAuthor - без загрузки других данных
```cs
var book = context.Books
	.Include(p => p.AuthorsLink)
	.Single(p => p.Title == "Quantum Networking");
// обновление связующей таблицы путем добавения связи
book.AuthorsLink.Add(
	new BookAuthor 
	{ 
		Book = book, 
		Author = existingAuthor, 
		Order = (byte) book.AuthorsLink.Count 
	}
);
```
- Обновление связи (многие ко многим)  для [[Автоматическое создание таблицы]]
- Простое добавление и удалени в связи 
###### Ручного создания нет т к таблица скрыта
```cs
// book и tags - связаны многие ко многим
book.Tags.Add(existingTag);
// или
tag.Books.Add(exsitingBook)
```
