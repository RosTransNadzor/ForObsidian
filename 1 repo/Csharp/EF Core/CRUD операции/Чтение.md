[[CRUD операции]]

- Запросы которые выполняются только для чтения - AsNoTracking()
- он повышает производительность потому что сущности не отслеживаюются
```cs
var books = context.Books .AsNoTracking().Include(a => a.Author) .ToList();
```
- AsNoTrackingWithIdentityResolution() - нужен когда: к примеру 2 книги ссылаются на 1 автора - без этого метода создадутся 2 автора ссылающимся на одну и ту же запись
- Этот метод гарантирует что при запросе будет создан 1 автор

![[AsNoTracking.png]]

- Есть другой способзаполнения нав свойств(без AsNoTracking)
```cs
// выполняются 4 запроса
// в результате books получат свои навигационные свойства
var books = context.Books.ToList(); 
var reviews = context.Set().ToList(); 
var authorsLinks = context.Set().ToList(); 
var authors = context.Authors.ToList();
```
- Разница между AsNoTracking(WithIdenitySolution) и ссылочной фиксацией - `Еще одна особенность методов AsNoTracking и  AsNoTrackingWithIdentityResolution заключается в том, что этап ссылочной фиксации (см. раздел 6.1.1) работает только в рамках запроса. В результате два запроса, использующих AsNoTracking или AsNoTrackingWithIdentityResolution, создадут новые экземпляры каждой сущности, даже если первый запрос загрузил те же данные. При обычных запросах два отдельных запроса будут возвращать одни и те же экземпляры класса сущности, потому что этап ссылочной фиксации работает для всех отслеживаемых сущностей`
- (страница 221)