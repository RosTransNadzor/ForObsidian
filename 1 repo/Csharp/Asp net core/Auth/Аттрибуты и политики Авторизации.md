[[Auth]]

- Добавить авторизацию
```cs
builder.AddAuthorization()

// добавить после аутинтифации
app.UseAuthentication();
app.UseAuthorization();
```
- Добавление политик
```cs
services.AddAuthorization(builder =>
{
	// создание политики авторизации
	builder.AddPolicy("isAnton", pb =>
	{
	//требует - авторизованного пользователя,определенную схему,определенное утверждение
	pb.RequireAuthenticatedUser().AddAuthenticationSchemes().RequireClaim("gg");
	});
});
```
- RequireClaim
```cs
// просто имеет утверждение
RequireClaim("gg")
// с подходящим значением
RequireClaim("gg","dfsa")
// массив подходящих значений
RequireClaim("gg","adaf","adfds")

```
- RequireUserName() и RequireRole() - ничего особенного они просто проверяют утверждения(Claim) зарезервированными в объявлении ClaimsIndentity
```cs

services.AddAuthorization(builder =>
{
	builder.AddPolicy("isAnton", pb =>
	{
		pb.RequireRole("admin").RequireUserName("anton");
	});
});
// ...
var claims = new List<Claim>
	{
		new Claim("UserName","anton"),
		new Claim("my-role-type","admin")
	};
	// 2 параметр имя схемы 
	// 3 параметр имя утверждения с именем пользователя
	// 4 параметр имя утверждения с ролью
	var identity = new ClaimsIdentity(claims,AuthScheme,"UserName","my-role-type");
	var user = new ClaimsPrincipal(identity);
```
- Аттрибут авторизации(в контроллере или обработчике)
```cs
// авторизация с определенной политикой
[Authorize(Policy = name)]
// просто необходима авторизация
[Authorize]
[AllowAnonymous]
```
#### Для более сложных политик необходимы [[Обработчики авторизации]]
