[[Конвейер фильтров]]

- Фильтр определенного этапа реализуется с помощью одной из пары интерфейсов – одного синхронного (sync) и одного асинхронного (async):
- Реализация конвейера ресурсов (атрибута)
```cs
public class LogResourceFilter : Attribute, IResourceFilter
{
	// в начале конвейера
	public void OnResourceExecuting( ResourceExecutingContext context)
	{
		Console.WriteLine("Executing!"); 
	}
	// после конвейера
	public void OnResourceExecuted( ResourceExecutedContext context) {
		Console.WriteLine("Executed"); 
	}
}
```
- Тот же самый но асинхронный
```cs
public class LogAsyncResourceFilter : Attribute, IAsyncResourceFilter
{
	public async Task OnResourceExecutionAsync(
	ResourceExecutingContext context,
	ResourceExecutionDelegate next)
	{
	    // в начале
		Console.WriteLine("Executing async!");
		// в конце конвейера
		ResourceExecutedContext executedContext = await next();
		Console.WriteLine("Executed async!");
	}
}
```
- Лучше использовать синхронную