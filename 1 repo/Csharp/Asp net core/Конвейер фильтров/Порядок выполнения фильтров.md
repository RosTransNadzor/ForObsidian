[[Конвейер фильтров]]

- Порядок сначала от верха вниз и наоборот 

![[порядок фильтров (2).png]]

- Определения порядка фильтров  (IOrderFilter)
```cs
// наследование IOrderedFilter
public class ControllerResourceFilter : Attribute, IResourceFilter, IOrderedFilter
{
	// получение порядкого номера из конструктора
	public ControllerResourceFilter(int order) => Order = order;
	// реализация IOrderedFilter
	public int Order { get; }

	public void OnResourceExecuting(ResourceExecutingContext context)
	{
		Console.WriteLine("ControllerResourceFilter.OnResourceExecuting");
	}

	public void OnResourceExecuted(ResourceExecutedContext context)
	{
		Console.WriteLine("ControllerResourceFilter.OnResourceExecuted");
	}
}
```
- Добавление порядка (контроллеры выполняются от меньшего порядка к меньшему
- и наоборот при обратном направлении)
```cs
// задание порядкового числа
[ControllerResourceFilter(5)]
public class HomeController : Controller
{
}
```