[[Конфигурация]]

- Три основные типа окружений
	- Development 
	- Staging
	- Production
- Получение информации об окружении
	- IHostEnvironment.IsDevelopment(); 
	- IHostEnvironment.IsStaging(); 
	- IHostEnvironment.IsProduction();
- В классах конфигурации:
```cs
public static void AddAppConfiguration( HostBuilderContext hostingContext, IConfigurationBuilder config) 
{ 
    // получение текущего окружения
	var env = hostingContext.HostingEnvironment; 
	config .AddJsonFile( "appsettings.json", optional: false)
			//добавление ососо названного файла в зависимости от окружения
		   .AddJsonFile $"appsettings.{env.EnvironmentName}.json", optional: true); }
```
- Опциональные файлы из прошлого примера
	- appsettings.Development.json
	- appsettings.Staging.json
	- appsettings.Production.json
- Изменение окружения 
![[prop.png]]


![[propjson.png]]

В данном файле нужно изменить Development(в 2х местах) на другое значение (Staging or Production)

- Настройка промежуточного ПО от окружения
```cs
if (app.Enviroment.IsDevelopment()) 
{ 
	app.UseDeveloperExceptionPage(); 
} 
else {
	app.UseExceptionHandler("/Error"); 
}
```