[[Жизненный цикл зависимостей]]

- Когда необходимо например внедрить scoped в singleton - возникнет ошибка
- Решение проблемы - ServiceProvider - ошибки не будет
```cs
public class SingletonService
	{
		// получение  ServiceProvider
		private readonly IServiceProvider _provider;
		public SingletonService(IServiceProvider serviceProvider) => _provider = serviceProvider;
		public int GetId()
		{
			int id = 0;
			// создание ограниченной области для scoped сервиса
			using(var scope = _provider.CreateScope())
			{
				// получение scoped сервиса (не null или ошибка)
				var scopedService = scope.ServiceProvider.GetRequiredService<ScopedService>();
				// пользование сервисом
				id = scopedService.Id;
			}
			// очистка ресурсов в конце
			return id;
		}
	}
```